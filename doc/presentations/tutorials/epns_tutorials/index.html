<!doctype html>
<html lang="en">

	<head>
		<meta charset="utf-8">

		<title>SE2 - Tutorials</title>

		<meta name="description" content="Software Engineering 2 - Tutorials presentation">
		<meta name="author" content="Group A">

		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<link rel="stylesheet" href="css/reveal.min.css">
		<link rel="stylesheet" href="css/theme/night.css" id="theme">

		<!-- For syntax highlighting -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<link rel="stylesheet" href="css/slides.css">

		<!-- If the query includes 'print-pdf', use the PDF print sheet -->
		<script>
			document.write( '<link rel="stylesheet" href="css/print/' + ( window.location.search.match( /print-pdf/gi ) ? 'pdf' : 'paper' ) + '.css" type="text/css" media="print">' );
		</script>

		<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->
	</head>

	<body>

		<div class="reveal">

			<!-- Any section element inside of this container is displayed as a slide -->
			<div class="slides">
				<section>
					<h1>Petri net tutorials</h1>
					<h3>Software Engineering 2</h3>
					<p>
						<a href="#">Group A</a>
					</p>
					<p>
						<small>Presenting <a href="mailto:s112213@student.dtu.dk">Albert</a>, <a href="mailto:s131519@student.dtu.dk">Thibaud</a> and <a href="#">Mikko</a></small></p>
					</p>
				</section>

				<section>
					<h2>Tutorials</h2>

					<p>
						This presentation shows our work on the tutorials.
					</p>

					<ol>
						<li>What have we <strong>done</strong></li>
						<li>What <strong>problems</strong> have we encountered</li>
						<li>What things are we going to <strong>use</strong> for our project</li>
					</ol>
				</section>

				<!--<section>
					<h2>Structure</h2>

					<p>
						We have grouped the tutorials in the following way:<br />
					</p>

					<ul>
						<li>Tutorials 1, 2 and 3: <a href="#/5">Basic functionality </a></li>
						<li>Tutorials 4, and 7: <a href="#/5"> GMF</a></li>
						<li>Tutorials 5 and 6: <a href="#/5">ePNK</a> and <a href="#/5">Xtext</a></li>
					</ul>
				</section>-->

				<section>
					<h2>Tutorial 1: The basics</h2>
					<p>
						A view which presents informations about the file extension of the currently selected file.
					</p>
				</section>

				<section>
					<h2>Behind the scenes:</h2>
					<pre><code data-trim contenteditable>
						public class FileTypeView extends ViewPart implements ISelectionListener
						</pre></code>
					<p>
						Register the view as a listener to the workbench and this method will be called everytime 
						the selection changes :

						<pre><code data-trim contenteditable>
						public void selectionChanged(IWorkbenchPart part, ISelection selection) 
						</pre></code>
					</p>
				</section>

				<section>
					<h2>The core method.</h2>
						<pre><code data-trim contenteditable>
						public String[] getFileExtension(ISelection selection) {
    if ( !(selection instanceof IStructuredSelection)) {
        return null;
    }

    IStructuredSelection structuredSelection = (IStructuredSelection) selection;
    
    String[] result = new String[structuredSelection.size()];
    int i = 0;
    for(Object o : structuredSelection.toArray()) {
        if (o instanceof IFile) {
            IFile file = (IFile) o;
            result[i] = file.getName() + " is a " + file.getFileExtension() + "file";
        } else if (o instanceof IFolder) {
            IFolder folder = (IFolder) o;
            result[i] = "Selected folder: " + folder.getName();
        } else if (o instanceof IProject) {
            IProject project = (IProject) o;
            result[i] = "Selected project: " + project.getName();
        }
        i++;
    }
    return result;
}
						</pre></code>
				</section>
				<section>
					<h2>Tutorials 2 &amp; 3</h2>
					<p>
						 A Petri Net Tree Editor
						<!--<strong>Simple. Clean. Intuitive.</strong>-->
					</p>
				</section>
				<section>
					<h2>Based on the following model:</h2>
					<p>
						<img src="img/petrinet.png" alt="Petrinet model"/>
					</p>
				</section>

				<section>
					<h2>Enhanced with the Undo/Redo mechanism...</h2>
					<pre><code data-trim contenteditable>
						public FireTransitionCommand(EditingDomain domain, Transition transition) {

    this.transition = transition;

    // Run through all the incoming places and remove a token from them
    for (Arc arc : transition.getIn()) {
        Place source = (Place) arc.getSource();

        //Here we create a Remove Command to remove one token from each source
        append(new RemoveCommand(domain, source,
                PetrinetPackage.eINSTANCE.getPlace_Tokens(), source
                        .getTokens().get(0)));
    }
    // Give a token to each outgoing place
    for (Arc arc : transition.getOut()) {
        Place target = (Place) arc.getTarget();
        Token token = PetrinetFactory.eINSTANCE.createToken();
        
        //Here we create a CreateChildCommand to add a token to each target
        append(new CreateChildCommand(domain, target,
                PetrinetPackage.eINSTANCE.getPlace_Tokens(), token, null));
    }
}
					</pre></code>
				</section>

				<section>
					<h2>..and the automatic identity</h2>
					<pre><code data-trim contenteditable>
						public CreatePObjectWIDCommand(EditingDomain domain, 
            EObject owner,
            Command command) {
    
    super(0);
    this.domain = domain;
    
    this.append(command);
    
    Collection<&#63;> collection = this.getResult();
    PObject resultObject = null;
    if (collection.iterator().next() instanceof PObject) {
        resultObject = (PObject) collection.iterator().next();
    }
    
    int max = -1;
    for (Object object: owner.eContents()) {
        if (object instanceof petrinet.PObject) {
            int currentId = ((petrinet.PObject) object).getId();
            
            max = Math.max(max, currentId);
        }
    }
    max = max + 1;
    
    this.append(new SetCommand(domain, resultObject, PetrinetPackage.eINSTANCE.getPObject_Id(), max));      
}
					</pre></code>
				</section>

				<section>
					<h2>Tutorials 4 &amp; 7</h2>
					<p>
						Graphical editor: Automatic generation <a>GMF</a>
					</p>
					<p>
						Listeners: Extending a graphical editor
					</p>
				</section>

				<section>
					<h2>Tutorials 4 &amp; 7</h2>
					<p>
						<img src="img/geometry.png" alt="Geometry model"/>
					</p>
				</section>

				<section>
					<h2>Tutorials 5 &amp; 6</h2>
					<p>Extending ePNK</p>
				</section>

				<section>
					<h2>T5: Objectives</h2>
					<ul>
					<li>To extend <a>ePNK</a> for including our group's features</li>
					<ul>
					<li>Geometry, Animation &amp; Appearance</li>
					</ul>
					<li>To add <a>constraints</a> to ensure the validation of the model</li>
					</ul>
				</section>

				<section>
					<h2>T5: Extending ePNK</h2>
					<div class="">
						<p>EMF model and diagram which represents our <a>extensions</a>.</p>
					</div>
					<div class="">
						<img src="img/petrinet_epnk.png">
					</div>
				</section>

				<section>
					<h2>Constraints validation</h2>
					<pre><code data-trim contenteditable>
public class ArcValidator extends AbstractModelConstraint {

    @Override
    public IStatus validate(IValidationContext ctx) {
        
        EObject eObject = ctx.getTarget();
        if (eObject instanceof Arc) {
            Arc arc = (Arc) eObject;
            Node source = arc.getSource();
            Node target = arc.getTarget();
            
            if((source instanceof Place && target instanceof Place) || 
                    (source instanceof Transition && target instanceof Transition)) {
                return ctx.createFailureStatus(new Object[] {arc});
            }
        }
        
        return ctx.createSuccessStatus();
    }

}
					</code></pre>
					<p>An arc can only connect a Place to a Transition or viceversa.</p>
				</section>

				<!--<section>
					<h3>T5: Result</h3>
					<div class="col2">
						<img src="img/pnml.png">
					</div>
					<div class="col2">
						<ul>
							<li>Bla bla</li>

						</ul>
					</div>
				</section>-->

				<section>
					<h2>Animation model</h2>
					<img src="img/animation.png">
					<p>Using this model, we autogenerated our own language</p>
				</section>

				<section>
					<h2>Our language with Xtext</h2>
					<div class="col2">

					<pre><code data-trim contenteditable>
move (10) ; show(L1) ; hide() ; [move(2) ; stop() ]
					</code>
					</pre>
					<p>Example</p>
					</div>
					<div class="col2">
						<p>Parse animation labels</p>
						<p>Validate them</p>
					</div>
				</section>

				

				

				<section>
					<h2>What we will use</h2>
					<ul>
						<li>Tutorial 1, 2, 3 - General features for all editors</li>
						<li>Tutorial 5 and 6 - Petri net editor</li>
						<li>Tutorial 4 and 7 - Geometry editor</li>
					</ul>
				</section>

			</div>

		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.min.js"></script>

		<script>

			// Full list of configuration options available here:
			// https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				controls: true,
				progress: true,
				history: true,
				center: true,
				overview: true,

				theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
				transition: Reveal.getQueryHash().transition || 'default', // default/cube/page/concave/zoom/linear/fade/none

				// Optional libraries used to extend on reveal.js
				dependencies: [
					{ src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
					{ src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
					{ src: 'plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
					{ src: 'plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }
				]
			});

		</script>
		<script src="js/jquery-1.10.2.min.js"></script>
<script>
function currentPageFormatter(event) {
        var formattedStr;
        
        if (event.indexh === 0) {
                return "";
        }
 
        formattedStr = event.indexh;
 
        if (event.indexv) {
            formattedStr += "/" + event.indexv;
        }
 
        return formattedStr;
    }
 
    Reveal.addEventListener( 'ready', function( event ) {
        $('<aside class="controls slide-number" style="display: block; left: 10px; right: initial;bottom: -30px; text-align: center;"></aside>')
            .text(currentPageFormatter(event))
            .appendTo('.reveal.center');
    } );
 
    // Fires each time a new slide is activated
    Reveal.addEventListener( 'slidechanged', function( event ) {
        // event.previousSlide, event.currentSlide, event.indexh, event.indexv
        $(".slide-number").text(currentPageFormatter(event));
    } );
</script>
	</body>
</html>
